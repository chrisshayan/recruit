<template name="Dashboard">
    <div class="wrapper wrapper-content" style="padding-bottom: 60px;">
        <div class="row">
            <div class="col-md-3" style="margin: 10px 0">
                <a href="{{pathFor 'addPosition'}}" class="btn btn-primary btn-block">
                    <i class="fa fa-plus"></i>
                    Add new position
                </a>
            </div>
            <div class="filter-email col-md-3 col-md-offset-6">
                {{> filterByEmail }}
            </div>
        </div>


        {{> Jobs
            status=1
            source="recruit"
            title="CUSTOM POSITIONS"
            icon="fa-cloud"
            emptyMessage="There is no position here."}}

        {{> Jobs
            status=1
            source="vnw"
            title="PUBLISHED POSITIONS"
            icon="fa-cloud"
            emptyMessage="There is no position here."}}


        {{> Jobs
            status=0
            source="vnw"
            title="CLOSED POSITIONS"
            icon="fa-archive"
            emptyMessage="Positions that no longer accepting new applicants will appear here."}}
    </div>
</template>

<template name="Jobs">

    <div class="row" style="margin-bottom: 20px">
        <div class="col-sm-12">
            <h3><i class="fa {{this.icon}}"></i>&nbsp;{{this.title}} ({{total}})</h3>

            <div class="jobs-list">
                {{#if isLoading.get}}
                    {{> waveLoading}}
                {{else}}
                    {{#if items.count}}
                        {{#each items}}
                            {{> JobItem}}
                        {{/each}}
                    {{else}}
                        {{> emptyJobs message=this.emptyMessage}}
                    {{/if}}
                {{/if}}
            </div>
            {{#unless isLoading.get}}
                {{#if isLoadingMore.get}}
                    {{> spinLoading}}
                {{else}}
                    {{#if loadMoreAbility}}
                        <button class="btn btn-small btn-block" data-load-more="true">Load more</button>
                    {{/if}}
                {{/if}}
            {{/unless}}
        </div>
    </div>
</template>

<template name="emptyJobs">
    <div class="empty-jobs">
        <h3 class="empty-message">{{this.message}}</h3>
    </div>
</template>


<template name="JobItem">
    <div class="job">
        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="panel-title clearfix">
                    <h3 class="pull-left job-title">
                        <a href="{{pathFor 'jobDetails' stage='applied'}}">
                            {{ title }}
                        </a>
                    </h3>
                    <span class="pull-right job-posted-timeago">From {{ timeago createdAt }} to {{ timeago expiredAt }}</span>
                </div>
            </div>
            <div class="job-stages">
                <div class="row">
                    <div class="col-sm-2 stage stage-sourced">
                        <a href="{{pathFor 'jobDetails' stage='sourced'}}" class="stage-number">{{ counter 0 }}</a>
                        <a href="{{pathFor 'jobDetails' stage='sourced'}}" class="stage-label">Sourced</a>
                    </div>

                    <div class="col-sm-2 stage stage-applied">
                        <a href="{{pathFor 'jobDetails' stage='applied'}}" class="stage-number">{{ counter 1 }}</a>
                        <a href="{{pathFor 'jobDetails' stage='applied'}}" class="stage-label">Applied</a>
                    </div>

                    <div class="col-sm-2 stage stage-phone">
                        <a href="{{pathFor 'jobDetails' stage='phone'}}" class="stage-number">{{ counter 2 }}</a>
                        <a href="{{pathFor 'jobDetails' stage='phone'}}" class="stage-label">Phone Screen</a>
                    </div>

                    <div class="col-sm-2 stage stage-interview">
                        <a href="{{pathFor 'jobDetails' stage='interview'}}" class="stage-number">{{ counter 3 }}</a>
                        <a href="{{pathFor 'jobDetails' stage='interview'}}" class="stage-label">Interview</a>
                    </div>

                    <div class="col-sm-2 stage stage-offer">
                        <a href="{{pathFor 'jobDetails' stage='offer'}}" class="stage-number">{{ counter 4 }}</a>
                        <a href="{{pathFor 'jobDetails' stage='offer'}}" class="stage-label">Offer</a>
                    </div>

                    <div class="col-sm-2 stage stage-hired">
                        <a href="{{pathFor 'jobDetails' stage='hired'}}" class="stage-number">{{ counter 5 }}</a>
                        <a href="{{pathFor 'jobDetails' stage='hired'}}" class="stage-label">Hired</a>
                    </div>
                </div>
            </div>
            <div class="panel-footer job-tags-box">
                <div class="panel-title clearfix">
                    {{> jobTagsInput jobId=jobId tagClass="tag label label-white"}}
                </div>
            </div>
        </div>
    </div>
</template>

<template name="filterByEmail">
    <div class="select-list-job" style="float:right;padding: 5px 0;">
        <a href="#" class="all-job"><span class="text-primary">All Job</span></a>
        / <a class="my-job" href="#"><span class="text-primary">My Job</span></a>
    </div>
    <div class="select-email-list">
        <select data-placeholder="Select your email" tabindex="-1" class="chosen-select form-control m-t"
                name="filer-email">
            <option value="">Select your email</option>
            {{#each emailList}}
                <option value="{{this}}" selected="{{isSelectedEMail this}}">{{this}}</option>
            {{/each}}
        </select>

        <div class="select-mail-action" style="display: none;">
            <button class="select-mail confirm btn btn-white" type="submit">
                <span class="fa fa-check text-info"></span>
            </button>
            <button class="select-mail cancel btn btn-white" type="button">
                <span class="fa fa-ban text-danger"></span>
            </button>
        </div>
    </div>
</template>